# Add this to the stream {} block in /etc/nginx/nginx.conf

stream {
    # Redis upstream
    upstream redis_upstream {
        server 127.0.0.1:6380;
    }

    # Redis with TLS
    server {
        listen 9551 ssl;
        proxy_pass redis_upstream;

        # SSL Configuration
        ssl_certificate /etc/nginx/ssl/arpansahu.space/fullchain.pem;
        ssl_certificate_key /etc/nginx/ssl/arpansahu.space/privkey.pem;
        ssl_protocols TLSv1.2 TLSv1.3;

        # Connection settings
        proxy_connect_timeout 5s;
        proxy_timeout 300s;
        proxy_buffer_size 16k;
    }
}
